<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Machine - Edukasi Bahaya Judi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        h1 {
            color: #ffcc00;
            margin-bottom: 20px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .login-screen, .game-screen {
            display: none;
        }

        .active {
            display: block;
        }

        .login-form {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            text-align: center;
        }

        button {
            background: #ffcc00;
            color: #333;
            border: none;
            padding: 15px 30px;
            margin: 15px 0;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            background: #ffdd44;
            transform: scale(1.05);
        }

        .slot-machine {
            background: linear-gradient(145deg, #2c3e50, #34495e);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
            border: 5px solid #ffcc00;
        }

        .reels-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .reel {
            width: 120px;
            height: 150px;
            background: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 3px solid #ffcc00;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .reel-content {
            position: absolute;
            width: 100%;
            transition: top 0.1s;
        }

        .symbol {
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
        }

        .jackpot-message {
            background: #ffcc00;
            color: #333;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            display: none;
        }

        .warning {
            background: rgba(255, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #ff0000;
        }

        .history {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .history h3 {
            margin-bottom: 10px;
            color: #ffcc00;
        }

        .history-item {
            padding: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        footer {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé∞ SLOT MACHINE EDUKASI üé∞</h1>
        <p>Demonstrasi bagaimana mesin slot dapat diprogram untuk menguntungkan pihak tertentu</p>
        
        <div class="login-screen active" id="loginScreen">
            <div class="login-form">
                <h2>Masukkan Nama Pengguna</h2>
                <input type="text" id="usernameInput" placeholder="Ketik username Anda di sini">
                <button id="loginButton">MASUK & BERMAIN</button>
                <div class="warning">
                    <p><strong>PERINGATAN:</strong> Permainan ini hanya untuk tujuan edukasi. Perjudian dapat menyebabkan ketagihan dan kerugian finansial.</p>
                </div>
            </div>
        </div>
        
        <div class="game-screen" id="gameScreen">
            <div class="info-panel">
                <div>Player: <span id="playerName">-</span></div>
                <div>Saldo: <span id="balance">1000</span> koin</div>
                <div>Spin: <span id="spinCount">0</span></div>
            </div>
            
            <div class="jackpot-message" id="jackpotMessage">
                JACKPOT BESAR! Anda memenangkan <span id="jackpotAmount">0</span> koin!
            </div>
            
            <div class="slot-machine">
                <div class="reels-container">
                    <div class="reel" id="reel1">
                        <div class="reel-content" id="reelContent1">
                            <div class="symbol">üçí</div>
                            <div class="symbol">üçã</div>
                            <div class="symbol">üçä</div>
                            <div class="symbol">üçá</div>
                            <div class="symbol">üîî</div>
                            <div class="symbol">üíé</div>
                            <div class="symbol">7Ô∏è‚É£</div>
                        </div>
                    </div>
                    <div class="reel" id="reel2">
                        <div class="reel-content" id="reelContent2">
                            <div class="symbol">üçí</div>
                            <div class="symbol">üçã</div>
                            <div class="symbol">üçä</div>
                            <div class="symbol">üçá</div>
                            <div class="symbol">üîî</div>
                            <div class="symbol">üíé</div>
                            <div class="symbol">7Ô∏è‚É£</div>
                        </div>
                    </div>
                    <div class="reel" id="reel3">
                        <div class="reel-content" id="reelContent3">
                            <div class="symbol">üçí</div>
                            <div class="symbol">üçã</div>
                            <div class="symbol">üçä</div>
                            <div class="symbol">üçá</div>
                            <div class="symbol">üîî</div>
                            <div class="symbol">üíé</div>
                            <div class="symbol">7Ô∏è‚É£</div>
                        </div>
                    </div>
                </div>
                
                <div class="controls">
                    <button id="spinButton">SPIN (10 koin)</button>
                    <button id="resetButton">RESET GAME</button>
                </div>
            </div>
            
            <div class="history">
                <h3>Riwayat Permainan</h3>
                <div id="gameHistory"></div>
            </div>
            
            <div class="warning">
                <p><strong>PENTING:</strong> Mesin slot ini diprogram untuk memberikan JACKPOT BESAR hanya kepada user dengan username "Zidan" (atau variannya) dalam 3 spin pertama. User lain tidak akan pernah mendapatkan jackpot, tidak peduli berapa kali spin.</p>
                <p>Ini membuktikan bahwa mesin slot bisa diprogram untuk menguntungkan pihak tertentu!</p>
            </div>
        </div>
    </div>
    
    <footer>
        <p>¬© 2023 Slot Machine Edukasi - Dibuat untuk demonstrasi bahaya perjudian</p>
    </footer>

    <!-- Audio Elements -->
    <audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-slot-machine-wheel-spin-1087.mp3" preload="auto"></audio>
    <audio id="jackpotSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>
    <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-coin-1998.mp3" preload="auto"></audio>
    <audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-slot-machine-lose-2031.mp3" preload="auto"></audio>

    <script>
        // Game state
        let gameState = {
            username: '',
            balance: 1000,
            spinCount: 0,
            isZidan: false,
            jackpotGiven: false
        };

        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const gameScreen = document.getElementById('gameScreen');
        const usernameInput = document.getElementById('usernameInput');
        const loginButton = document.getElementById('loginButton');
        const playerName = document.getElementById('playerName');
        const balanceDisplay = document.getElementById('balance');
        const spinCountDisplay = document.getElementById('spinCount');
        const spinButton = document.getElementById('spinButton');
        const resetButton = document.getElementById('resetButton');
        const jackpotMessage = document.getElementById('jackpotMessage');
        const jackpotAmount = document.getElementById('jackpotAmount');
        const gameHistory = document.getElementById('gameHistory');
        
        // Reel elements
        const reelContents = [
            document.getElementById('reelContent1'),
            document.getElementById('reelContent2'),
            document.getElementById('reelContent3')
        ];

        // Audio elements
        const spinSound = document.getElementById('spinSound');
        const jackpotSound = document.getElementById('jackpotSound');
        const winSound = document.getElementById('winSound');
        const loseSound = document.getElementById('loseSound');

        // Symbol values
        const symbols = ['üçí', 'üçã', 'üçä', 'üçá', 'üîî', 'üíé', '7Ô∏è‚É£'];
        const symbolValues = {
            'üçí': 10,
            'üçã': 20,
            'üçä': 30,
            'üçá': 40,
            'üîî': 50,
            'üíé': 100,
            '7Ô∏è‚É£': 200
        };

        // Login functionality
        loginButton.addEventListener('click', () => {
            const username = usernameInput.value.trim();
            if (username) {
                gameState.username = username;
                gameState.isZidan = ['zidan', 'Zidan', 'ZIDAN'].includes(username);
                playerName.textContent = username;
                
                // Log to Google Sheets (simulated)
                logToGoogleSheets(username);
                
                // Switch to game screen
                loginScreen.classList.remove('active');
                gameScreen.classList.add('active');
                
                // Add to game history
                addToHistory(`Selamat datang, ${username}!${gameState.isZidan ? ' (USER KHUSUS)' : ''}`);
            } else {
                alert('Masukkan nama pengguna terlebih dahulu!');
            }
        });

        // Spin functionality
        spinButton.addEventListener('click', () => {
            if (gameState.balance < 10) {
                alert('Saldo tidak cukup! Silakan reset game.');
                return;
            }
            
            // Deduct spin cost
            gameState.balance -= 10;
            gameState.spinCount++;
            
            // Update displays
            balanceDisplay.textContent = gameState.balance;
            spinCountDisplay.textContent = gameState.spinCount;
            
            // Play spin sound
            spinSound.currentTime = 0;
            spinSound.play();
            
            // Spin the reels
            spinReels();
        });

        // Reset functionality
        resetButton.addEventListener('click', () => {
            gameState.balance = 1000;
            gameState.spinCount = 0;
            gameState.jackpotGiven = false;
            
            balanceDisplay.textContent = gameState.balance;
            spinCountDisplay.textContent = gameState.spinCount;
            jackpotMessage.style.display = 'none';
            
            addToHistory(`Game direset oleh ${gameState.username}`);
        });

        // Spin reels function
        function spinReels() {
            // Reset reel positions
            reelContents.forEach(reel => {
                reel.style.top = '0px';
            });
            
            // Generate random results
            const results = [];
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * symbols.length);
                results.push(symbols[randomIndex]);
            }
            
            // Check for special conditions for Zidan
            if (gameState.isZidan && !gameState.jackpotGiven && gameState.spinCount >= 3) {
                // Force jackpot for Zidan on 3rd spin
                results[0] = '7Ô∏è‚É£';
                results[1] = '7Ô∏è‚É£';
                results[2] = '7Ô∏è‚É£';
                gameState.jackpotGiven = true;
            }
            
            // Animate reels
            animateReels(results);
        }

        // Animate reels
        function animateReels(results) {
            const spinDuration = 2000; // 2 seconds
            const startTime = Date.now();
            
            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / spinDuration, 1);
                
                // Easing function for smooth stop
                const easing = 1 - Math.pow(1 - progress, 3);
                
                // Move reels
                reelContents.forEach((reel, index) => {
                    // Calculate position with overshoot and bounce back
                    let position;
                    if (progress < 0.8) {
                        // Fast spinning
                        position = -easing * 1000;
                    } else {
                        // Slow down to final position
                        const finalPosition = -symbols.indexOf(results[index]) * 150;
                        const slowProgress = (progress - 0.8) / 0.2;
                        position = finalPosition - (1 - slowProgress) * 100;
                    }
                    reel.style.top = `${position}px`;
                });
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Animation complete, check results
                    checkResults(results);
                }
            }
            
            animate();
        }

        // Check spin results
        function checkResults(results) {
            let winAmount = 0;
            let message = '';
            
            // Check for jackpot (three 7s)
            if (results[0] === '7Ô∏è‚É£' && results[1] === '7Ô∏è‚É£' && results[2] === '7Ô∏è‚É£') {
                if (gameState.isZidan && gameState.spinCount >= 3) {
                    winAmount = 50000000; // 50 juta koin untuk Zidan
                    message = `JACKPOT BESAR! Anda memenangkan ${winAmount.toLocaleString()} koin!`;
                    
                    // Show jackpot message
                    jackpotAmount.textContent = winAmount.toLocaleString();
                    jackpotMessage.style.display = 'block';
                    
                    // Play jackpot sound
                    jackpotSound.play();
                    
                    addToHistory(`JACKPOT BESAR! ${winAmount.toLocaleString()} koin!`);
                } else {
                    winAmount = 1000; // Regular jackpot untuk non-Zidan
                    message = `Jackpot! Anda memenangkan ${winAmount} koin!`;
                    winSound.play();
                    addToHistory(`Jackpot reguler: ${winAmount} koin`);
                }
            } 
            // Check for other winning combinations
            else if (results[0] === results[1] && results[1] === results[2]) {
                winAmount = symbolValues[results[0]] * 10;
                message = `Tiga simbol ${results[0]}! Menang ${winAmount} koin!`;
                winSound.play();
                addToHistory(`Tiga ${results[0]}: ${winAmount} koin`);
            } 
            else if (results[0] === results[1] || results[1] === results[2] || results[0] === results[2]) {
                winAmount = 50;
                message = `Dua simbol sama! Menang ${winAmount} koin!`;
                winSound.play();
                addToHistory(`Dua simbol sama: ${winAmount} koin`);
            } 
            else {
                message = "Tidak menang. Coba lagi!";
                loseSound.play();
                addToHistory(`Spin #${gameState.spinCount}: Kalah`);
            }
            
            // Update balance
            gameState.balance += winAmount;
            balanceDisplay.textContent = gameState.balance;
            
            // Show message
            if (winAmount > 0 && !(results[0] === '7Ô∏è‚É£' && results[1] === '7Ô∏è‚É£' && results[2] === '7Ô∏è‚É£' && gameState.isZidan)) {
                alert(message);
            }
        }

        // Add to game history
        function addToHistory(text) {
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            historyItem.textContent = `[${new Date().toLocaleTimeString()}] ${text}`;
            gameHistory.appendChild(historyItem);
            gameHistory.scrollTop = gameHistory.scrollHeight;
        }

        // Simulate logging to Google Sheets
        function logToGoogleSheets(username) {
            // In a real implementation, you would send data to a Google Apps Script
            // that writes to a Google Sheet. For this demo, we'll just log to console.
            console.log(`Logging to Google Sheets: Username: ${username}, Time: ${new Date().toISOString()}`);
            
            // Example of how you might send data to Google Sheets:
            /*
            const scriptURL = 'YOUR_GOOGLE_APPS_SCRIPT_URL';
            const formData = new FormData();
            formData.append('username', username);
            formData.append('timestamp', new Date().toISOString());
            
            fetch(scriptURL, {
                method: 'POST',
                body: formData
            })
            .then(response => console.log('Successfully logged to Google Sheets'))
            .catch(error => console.error('Error logging to Google Sheets:', error));
            */
        }

        // Allow Enter key to submit login form
        usernameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loginButton.click();
            }
        });
    </script>
</body>
</html>
